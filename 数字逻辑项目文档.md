# CS207 2024Fall Project

**小组成员**：沈泓立、郑袭明、刘安钊

### 开发日程安排和实施情况

------



#### 1.团队分工及贡献占比

**沈泓立：**开关机实现、手势开关实现（bonus）以及时间调整、照明功能、开机时间显示以及调整、项目文档编写

**郑袭明：**

**刘安钊：**

**贡献百分比：**1:1:1

#### 2.开发计划日程安排

```
第十周：任务分工
第十一周：开机功能、模式切换、抽油烟机功能基础、照明功能、自清洁功能
第十二周：计时功能、智能提醒、高级设置、查询功能
第十三周：附加分
第十四周：功能合并、测试
第十五周：答辩
```

#### 3.实施情况

```
第十周：任务分工
第十一周：
第十二周：
第十三周：
第十四周：
第十五周：答辩
第十六周：
第十七周：
```

#### 4.心得

由于各组员学习任务较重，小组采用分工进行模块化编程的方式逐步实现了整个项目，并且时间整体较为充裕。经过整个项目的编写，我们小组对于硬件语言有了更加充分的了解，为日后的计算机专业学习打下了坚实的基础。

### 系统功能列表和使用说明

------

**本项目实现了一个由EGO1控制的电子琴学习机，并具有以下功能：**

1.短按开机键开机，长按关机键（同开机键）3秒实现关机。

2.先按左键开始5秒（可切换为2秒、7秒、9秒）倒计时，在5秒（2秒、7秒、9秒）内按右键实现开机；关机操作反之。若未完成后半部分则失效。

3.

4.

**显示模块**包括led灯的显示（开机、档位、照明、自清洁）、七段数码管的显示（开机时间、累计工作时间、手势操作时间、提醒时间）

**输入输出端口说明示意图**如下：

**顶层端口设计**如下：

|      Port name       | Direction |   Type    |      Description       |
| :------------------: | :-------: | :-------: | :--------------------: |
|         clk          |   input   |   wire    |       总时钟信号       |
|      key_input       |   input   |   wire    |        开关机键        |
|     time_select      |   input   | wire[1:0] |    手势操作时间设置    |
|       left_key       |   input   |   wire    |      手势操作左键      |
|      right_key       |   input   |   wire    |      手势操作右键      |
|  power_control_mode  |   input   |   wire    |      开机模式切换      |
|       set_mode       |   input   |   wire    |      时间设置模式      |
|      set_select      |   input   |   wire    |   时间设置小时或分钟   |
|     increase_key     |   input   |   wire    |    开机时间增加按键    |
| increase_warning_key |   input   |   wire    |    提醒时间增加按键    |
|      light_key       |   input   |   wire    |        照明开关        |
|       menu_btn       |   input   |   wire    |         菜单键         |
|      speed_btn       |   input   | wire[2:0] |        工作档位        |
|      clean_btn       |   input   |   wire    |        清洁按钮        |
|     display_mode     |   input   |   wire    | 显示工作时间或提醒时间 |
|    work_time_key     |   input   |   wire    |      工作时间切换      |
|   gesture_time_key   |   input   |   wire    |  手势操作时间切换按钮  |
|     power_state      |  output   |    reg    |         开机灯         |
|    tub_segments1     |  output   |   [7:0]   |  第一组七段数码管内容  |
|    tub_segments2     |  output   |   [7:0]   |  第二组七段数码管内容  |
|  tub_segment_select  |  output   |   [7:0]   |     七段数码管控制     |
|     light_state      |  output   |   wire    |         照明灯         |
|         mode         |  output   |   [2:0]   |        工作模式        |
|      countdown       |  output   |   wire    |      倒计时显示灯      |
|       reminder       |  output   |   wire    |       提醒清洁灯       |
|       speaker        |  output   |   wire    |         扬声器         |
|         pwm          |  output   |   wire    |        pwm信号         |



并可以用下图展示：

### 系统结构说明

------

**本项目的结构可由下面的流程图说明，其中，每个模块的功能在后面的子模块功能说明中有详细的介绍。**

### 子模块功能说明

------

#### 顶层模块：main

内部直接实现子模块实例：

​	`gesture_power_control_timer`，实现手势操作的时间显示和设置。

​	`gesture_power_control`，实现手势操作的核心逻辑。

​	`key_press_detector`，检测为短按还是3秒长按。

​	`power_control`，短按开机，长按关机实现。

​	`timer_mode`，开机时间显示以及调整。

​	`light`，照明功能。

​	`mode_change`，

​	`sound_reminder`，

​	`time_setter`，

#### 子模块：gesture_power_control_timer

#### 子模块：gesture_power_control

#### 子模块：key_press_detector

#### 子模块：power_control

#### 子模块：timer_mode

#### 子模块：light

#### 子模块：mode_change

#### 子模块：sound_reminder

#### 子模块：time_setter

### Bonus实现说明

------

#### 手势操作模式

#### 外界输出设备（扬声器）

### 项目总结

------

#### 遇到的一些问题和解决方案

#### 远期优化

#### 心得

### 对project的想法与建议

------

